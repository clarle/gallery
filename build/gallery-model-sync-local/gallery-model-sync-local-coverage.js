if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-model-sync-local/gallery-model-sync-local.js']) {
   __coverage__['build/gallery-model-sync-local/gallery-model-sync-local.js'] = {"path":"build/gallery-model-sync-local/gallery-model-sync-local.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0,0,0],"7":[0,0],"8":[0,0],"9":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":36},"end":{"line":1,"column":55}}},"2":{"name":"LocalSync","line":32,"loc":{"start":{"line":32,"column":0},"end":{"line":32,"column":21}}},"3":{"name":"(anonymous_3)","line":78,"loc":{"start":{"line":78,"column":17},"end":{"line":78,"column":35}}},"4":{"name":"(anonymous_4)","line":104,"loc":{"start":{"line":104,"column":16},"end":{"line":104,"column":31}}},"5":{"name":"(anonymous_5)","line":133,"loc":{"start":{"line":133,"column":10},"end":{"line":133,"column":47}}},"6":{"name":"(anonymous_6)","line":172,"loc":{"start":{"line":172,"column":12},"end":{"line":172,"column":31}}},"7":{"name":"(anonymous_7)","line":183,"loc":{"start":{"line":183,"column":11},"end":{"line":183,"column":30}}},"8":{"name":"(anonymous_8)","line":194,"loc":{"start":{"line":194,"column":13},"end":{"line":194,"column":32}}},"9":{"name":"(anonymous_9)","line":210,"loc":{"start":{"line":210,"column":13},"end":{"line":210,"column":32}}},"10":{"name":"(anonymous_10)","line":225,"loc":{"start":{"line":225,"column":14},"end":{"line":225,"column":33}}},"11":{"name":"(anonymous_11)","line":237,"loc":{"start":{"line":237,"column":11},"end":{"line":237,"column":23}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":264,"column":3}},"2":{"start":{"line":32,"column":0},"end":{"line":32,"column":23}},"3":{"start":{"line":44,"column":0},"end":{"line":44,"column":36}},"4":{"start":{"line":53,"column":0},"end":{"line":53,"column":21}},"5":{"start":{"line":55,"column":0},"end":{"line":243,"column":2}},"6":{"start":{"line":79,"column":8},"end":{"line":79,"column":18}},"7":{"start":{"line":81,"column":8},"end":{"line":81,"column":32}},"8":{"start":{"line":83,"column":8},"end":{"line":85,"column":9}},"9":{"start":{"line":84,"column":12},"end":{"line":84,"column":42}},"10":{"start":{"line":87,"column":8},"end":{"line":91,"column":9}},"11":{"start":{"line":88,"column":12},"end":{"line":88,"column":53}},"12":{"start":{"line":89,"column":12},"end":{"line":89,"column":52}},"13":{"start":{"line":94,"column":8},"end":{"line":94,"column":74}},"14":{"start":{"line":105,"column":8},"end":{"line":105,"column":33}},"15":{"start":{"line":134,"column":8},"end":{"line":134,"column":34}},"16":{"start":{"line":135,"column":8},"end":{"line":135,"column":21}},"17":{"start":{"line":137,"column":8},"end":{"line":154,"column":9}},"18":{"start":{"line":139,"column":16},"end":{"line":143,"column":17}},"19":{"start":{"line":140,"column":20},"end":{"line":140,"column":52}},"20":{"start":{"line":142,"column":20},"end":{"line":142,"column":51}},"21":{"start":{"line":144,"column":16},"end":{"line":144,"column":22}},"22":{"start":{"line":146,"column":16},"end":{"line":146,"column":49}},"23":{"start":{"line":147,"column":16},"end":{"line":147,"column":22}},"24":{"start":{"line":149,"column":16},"end":{"line":149,"column":49}},"25":{"start":{"line":150,"column":16},"end":{"line":150,"column":22}},"26":{"start":{"line":152,"column":16},"end":{"line":152,"column":50}},"27":{"start":{"line":153,"column":16},"end":{"line":153,"column":22}},"28":{"start":{"line":156,"column":8},"end":{"line":160,"column":9}},"29":{"start":{"line":157,"column":12},"end":{"line":157,"column":37}},"30":{"start":{"line":159,"column":12},"end":{"line":159,"column":39}},"31":{"start":{"line":173,"column":8},"end":{"line":173,"column":59}},"32":{"start":{"line":184,"column":8},"end":{"line":184,"column":58}},"33":{"start":{"line":195,"column":8},"end":{"line":195,"column":33}},"34":{"start":{"line":196,"column":8},"end":{"line":196,"column":45}},"35":{"start":{"line":197,"column":8},"end":{"line":197,"column":51}},"36":{"start":{"line":199,"column":8},"end":{"line":199,"column":21}},"37":{"start":{"line":200,"column":8},"end":{"line":200,"column":20}},"38":{"start":{"line":211,"column":8},"end":{"line":211,"column":51}},"39":{"start":{"line":212,"column":8},"end":{"line":212,"column":58}},"40":{"start":{"line":214,"column":8},"end":{"line":214,"column":21}},"41":{"start":{"line":215,"column":8},"end":{"line":215,"column":20}},"42":{"start":{"line":226,"column":8},"end":{"line":226,"column":58}},"43":{"start":{"line":227,"column":8},"end":{"line":227,"column":21}},"44":{"start":{"line":228,"column":8},"end":{"line":228,"column":29}},"45":{"start":{"line":238,"column":8},"end":{"line":241,"column":10}},"46":{"start":{"line":247,"column":0},"end":{"line":247,"column":43}}},"branchMap":{"1":{"line":81,"type":"binary-expr","locations":[{"start":{"line":81,"column":8},"end":{"line":81,"column":14}},{"start":{"line":81,"column":19},"end":{"line":81,"column":30}}]},"2":{"line":83,"type":"if","locations":[{"start":{"line":83,"column":8},"end":{"line":83,"column":8}},{"start":{"line":83,"column":8},"end":{"line":83,"column":8}}]},"3":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":24},"end":{"line":84,"column":35}},{"start":{"line":84,"column":39},"end":{"line":84,"column":41}}]},"4":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":38},"end":{"line":94,"column":43}},{"start":{"line":94,"column":47},"end":{"line":94,"column":66}},{"start":{"line":94,"column":71},"end":{"line":94,"column":73}}]},"5":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":8},"end":{"line":134,"column":15}},{"start":{"line":134,"column":20},"end":{"line":134,"column":32}}]},"6":{"line":137,"type":"switch","locations":[{"start":{"line":138,"column":12},"end":{"line":144,"column":22}},{"start":{"line":145,"column":12},"end":{"line":147,"column":22}},{"start":{"line":148,"column":12},"end":{"line":150,"column":22}},{"start":{"line":151,"column":12},"end":{"line":153,"column":22}}]},"7":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":16},"end":{"line":139,"column":16}},{"start":{"line":139,"column":16},"end":{"line":139,"column":16}}]},"8":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":156,"column":8}},{"start":{"line":156,"column":8},"end":{"line":156,"column":8}}]},"9":{"line":238,"type":"binary-expr","locations":[{"start":{"line":238,"column":8},"end":{"line":238,"column":20}},{"start":{"line":238,"column":24},"end":{"line":241,"column":9}}]}},"code":["(function () { YUI.add('gallery-model-sync-local', function (Y, NAME) {","","/**","An extension which provides a sync implementation through locally stored","key value pairs, either through the HTML localStorage API or falling back","onto an in-memory cache, that can be mixed into a Model or ModelList subclass.","","@module gallery-model-sync-local","**/","","/**","An extension which provides a sync implementation through locally stored","key value pairs, either through the HTML localStorage API or falling back","onto an in-memory cache, that can be mixed into a Model or ModelList subclass.","","A group of Models/ModelLists is serialized in localStorage by either its ","class name, or a specified 'root' that is provided. ","","    var User = Y.Base.create('user', Y.Model, [Y.ModelSync.REST], {","        root: 'user'","    });","","    var Users = Y.Base.create('users', Y.ModelList, [Y.ModelSync.REST], {","        model: User,","        root  : 'user'","    });","","@class ModelSync.Local","@extensionfor Model","@extensionfor ModelList","**/","function LocalSync() {}","","/**","Properties that shouldn't be turned into ad-hoc attributes when passed to a","Model or ModelList constructor.","","@property _NON_ATTRS_CFG","@type Array","@default ['root', 'url']","@static","@protected","**/","LocalSync._NON_ATTRS_CFG = ['root'];","","/**","Object of key/value pairs to fall back on when localStorage is not available.","","@property _data","@type Object","@private","**/","LocalSync._data = {};","","LocalSync.prototype = {","","    // -- Public Methods -------------------------------------------------------","    ","    /**","    Root used as the key inside of localStorage and/or the in-memory store.","    ","    @property root","    @type String","    @default \"\"","    **/","    root: '',","","    /**","    Shortcut for access to localStorage.","    ","    @property storage","    @type Storage","    @default null","    **/","    storage: null,","","    // -- Lifecycle Methods -----------------------------------------------------","    initializer: function (config) {","        var store;","","        config || (config = {});","","        if ('root' in config) {","            this.root = config.root || '';","        }","","        try {","            this.storage = Y.config.win.localStorage;","            store = this.storage.getItem(this.root);","        } catch (e) {","        }","        ","        // Pull in existing data from localStorage, if possible","        LocalSync._data[this.root] = (store && Y.JSON.parse(store)) || {};","    },","","    /**","    Generate a random GUID for our Models. This can be overriden if you have","    another method of generating different IDs.","    ","    @method generateID","    @param {String} pre Optional GUID prefix","    **/","    generateID: function (pre) {","        return Y.guid(pre + '_');","    },","    ","    // -- Public Methods -----------------------------------------------------------","    ","    /**","    Creates a synchronization layer with the localStorage API, if available.","    Otherwise, falls back to a in-memory data store.","","    This method is called internally by load(), save(), and destroy().","","    @method sync","    @param {String} action Sync action to perform. May be one of the following:","","      * **create**: Store a newly-created model for the first time.","      * **read**  : Load an existing model.","      * **update**: Update an existing model.","      * **delete**: Delete an existing model.","","    @param {Object} [options] Sync options","    @param {callback} [callback] Called when the sync operation finishes.","      @param {Error|null} callback.err If an error occurred, this parameter will","        contain the error. If the sync operation succeeded, _err_ will be","        falsy.","      @param {Any} [callback.response] The response from our sync. This value will","        be passed to the parse() method, which is expected to parse it and","        return an attribute hash.","    **/","    sync: function (action, options, callback) {","        options || (options = {});","        var response;","","        switch (action) {","            case 'read':","                if (this._isYUIModelList) {","                    response = this._index(options);","                } else {","                    response = this._show(options);","                }","                break;","            case 'create':","                response = this._create(options);","                break;","            case 'update':","                response = this._update(options);","                break;","            case 'delete':","                response = this._destroy(options);","                break;","        }","","        if (response) {","            callback(null, response);","        } else {","            callback('Data not found');","        }","    },","","    // -- Protected Methods ----------------------------------------------------","    ","    /**","    Sync method correlating to the \"read\" operation, for a Model List","    ","    @method _index","    @return {Object[]} Array of objects found for that root key","    @protected","    **/    ","    _index: function (options) {","        return Y.Object.values(LocalSync._data[this.root]);","    },","","    /**","    Sync method correlating to the \"read\" operation, for a Model","    ","    @method _show","    @return {Object} Object found for that root key and model ID","    @protected","    **/ ","    _show: function (options) {","        return LocalSync._data[this.root][this.get('id')];","    },","    ","    /**","    Sync method correlating to the \"create\" operation","    ","    @method _show","    @return {Object} The new object created.","    @protected","    **/ ","    _create: function (options) {","        var hash = this.toJSON();","        hash.id = this.generateID(this.root);","        LocalSync._data[this.root][hash.id] = hash;","","        this._save();","        return hash;","    },","","    /**","    Sync method correlating to the \"update\" operation","    ","    @method _update","    @return {Object} The updated object.","    @protected","    **/ ","    _update: function (options) {","        var hash = Y.merge(this.toJSON(), options);","        LocalSync._data[this.root][this.get('id')] = hash;","        ","        this._save();","        return hash;","    },","","    /**","    Sync method correlating to the \"delete\" operation","    ","    @method _destroy","    @return {Object} The deleted object.","    @protected","    **/ ","    _destroy: function (options) {","        delete LocalSync._data[this.root][this.get('id')];","        this._save();","        return this.toJSON();","    },","    ","    /**","    Saves the current in-memory store into a localStorage key/value pair","    ","    @method _save","    @protected","    **/ ","    _save: function () {","        this.storage && this.storage.setItem(","            this.root,","            Y.JSON.stringify(LocalSync._data[this.root])","        );","    }","};","","// -- Namespace ---------------------------------------------------------------","","Y.namespace('ModelSync').Local = LocalSync;","","","}, '@VERSION@', {","    \"supersedes\": [","        \"\"","    ],","    \"skinnable\": \"false\",","    \"requires\": [","        \"model\",","        \"model-list\",","        \"io-base\",","        \"json-stringify\"","    ],","    \"optional\": [","        \"\"","    ]","});","","}());"]};
}
var __cov_A_RJszs9FwhvDhTpwSgocw = __coverage__['build/gallery-model-sync-local/gallery-model-sync-local.js'];
__cov_A_RJszs9FwhvDhTpwSgocw.s['1']++;YUI.add('gallery-model-sync-local',function(Y,NAME){__cov_A_RJszs9FwhvDhTpwSgocw.f['1']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['2']++;function LocalSync(){__cov_A_RJszs9FwhvDhTpwSgocw.f['2']++;}__cov_A_RJszs9FwhvDhTpwSgocw.s['3']++;LocalSync._NON_ATTRS_CFG=['root'];__cov_A_RJszs9FwhvDhTpwSgocw.s['4']++;LocalSync._data={};__cov_A_RJszs9FwhvDhTpwSgocw.s['5']++;LocalSync.prototype={root:'',storage:null,initializer:function(config){__cov_A_RJszs9FwhvDhTpwSgocw.f['3']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['6']++;var store;__cov_A_RJszs9FwhvDhTpwSgocw.s['7']++;(__cov_A_RJszs9FwhvDhTpwSgocw.b['1'][0]++,config)||(__cov_A_RJszs9FwhvDhTpwSgocw.b['1'][1]++,config={});__cov_A_RJszs9FwhvDhTpwSgocw.s['8']++;if('root'in config){__cov_A_RJszs9FwhvDhTpwSgocw.b['2'][0]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['9']++;this.root=(__cov_A_RJszs9FwhvDhTpwSgocw.b['3'][0]++,config.root)||(__cov_A_RJszs9FwhvDhTpwSgocw.b['3'][1]++,'');}else{__cov_A_RJszs9FwhvDhTpwSgocw.b['2'][1]++;}__cov_A_RJszs9FwhvDhTpwSgocw.s['10']++;try{__cov_A_RJszs9FwhvDhTpwSgocw.s['11']++;this.storage=Y.config.win.localStorage;__cov_A_RJszs9FwhvDhTpwSgocw.s['12']++;store=this.storage.getItem(this.root);}catch(e){}__cov_A_RJszs9FwhvDhTpwSgocw.s['13']++;LocalSync._data[this.root]=(__cov_A_RJszs9FwhvDhTpwSgocw.b['4'][0]++,store)&&(__cov_A_RJszs9FwhvDhTpwSgocw.b['4'][1]++,Y.JSON.parse(store))||(__cov_A_RJszs9FwhvDhTpwSgocw.b['4'][2]++,{});},generateID:function(pre){__cov_A_RJszs9FwhvDhTpwSgocw.f['4']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['14']++;return Y.guid(pre+'_');},sync:function(action,options,callback){__cov_A_RJszs9FwhvDhTpwSgocw.f['5']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['15']++;(__cov_A_RJszs9FwhvDhTpwSgocw.b['5'][0]++,options)||(__cov_A_RJszs9FwhvDhTpwSgocw.b['5'][1]++,options={});__cov_A_RJszs9FwhvDhTpwSgocw.s['16']++;var response;__cov_A_RJszs9FwhvDhTpwSgocw.s['17']++;switch(action){case'read':__cov_A_RJszs9FwhvDhTpwSgocw.b['6'][0]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['18']++;if(this._isYUIModelList){__cov_A_RJszs9FwhvDhTpwSgocw.b['7'][0]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['19']++;response=this._index(options);}else{__cov_A_RJszs9FwhvDhTpwSgocw.b['7'][1]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['20']++;response=this._show(options);}__cov_A_RJszs9FwhvDhTpwSgocw.s['21']++;break;case'create':__cov_A_RJszs9FwhvDhTpwSgocw.b['6'][1]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['22']++;response=this._create(options);__cov_A_RJszs9FwhvDhTpwSgocw.s['23']++;break;case'update':__cov_A_RJszs9FwhvDhTpwSgocw.b['6'][2]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['24']++;response=this._update(options);__cov_A_RJszs9FwhvDhTpwSgocw.s['25']++;break;case'delete':__cov_A_RJszs9FwhvDhTpwSgocw.b['6'][3]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['26']++;response=this._destroy(options);__cov_A_RJszs9FwhvDhTpwSgocw.s['27']++;break;}__cov_A_RJszs9FwhvDhTpwSgocw.s['28']++;if(response){__cov_A_RJszs9FwhvDhTpwSgocw.b['8'][0]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['29']++;callback(null,response);}else{__cov_A_RJszs9FwhvDhTpwSgocw.b['8'][1]++;__cov_A_RJszs9FwhvDhTpwSgocw.s['30']++;callback('Data not found');}},_index:function(options){__cov_A_RJszs9FwhvDhTpwSgocw.f['6']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['31']++;return Y.Object.values(LocalSync._data[this.root]);},_show:function(options){__cov_A_RJszs9FwhvDhTpwSgocw.f['7']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['32']++;return LocalSync._data[this.root][this.get('id')];},_create:function(options){__cov_A_RJszs9FwhvDhTpwSgocw.f['8']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['33']++;var hash=this.toJSON();__cov_A_RJszs9FwhvDhTpwSgocw.s['34']++;hash.id=this.generateID(this.root);__cov_A_RJszs9FwhvDhTpwSgocw.s['35']++;LocalSync._data[this.root][hash.id]=hash;__cov_A_RJszs9FwhvDhTpwSgocw.s['36']++;this._save();__cov_A_RJszs9FwhvDhTpwSgocw.s['37']++;return hash;},_update:function(options){__cov_A_RJszs9FwhvDhTpwSgocw.f['9']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['38']++;var hash=Y.merge(this.toJSON(),options);__cov_A_RJszs9FwhvDhTpwSgocw.s['39']++;LocalSync._data[this.root][this.get('id')]=hash;__cov_A_RJszs9FwhvDhTpwSgocw.s['40']++;this._save();__cov_A_RJszs9FwhvDhTpwSgocw.s['41']++;return hash;},_destroy:function(options){__cov_A_RJszs9FwhvDhTpwSgocw.f['10']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['42']++;delete LocalSync._data[this.root][this.get('id')];__cov_A_RJszs9FwhvDhTpwSgocw.s['43']++;this._save();__cov_A_RJszs9FwhvDhTpwSgocw.s['44']++;return this.toJSON();},_save:function(){__cov_A_RJszs9FwhvDhTpwSgocw.f['11']++;__cov_A_RJszs9FwhvDhTpwSgocw.s['45']++;(__cov_A_RJszs9FwhvDhTpwSgocw.b['9'][0]++,this.storage)&&(__cov_A_RJszs9FwhvDhTpwSgocw.b['9'][1]++,this.storage.setItem(this.root,Y.JSON.stringify(LocalSync._data[this.root])));}};__cov_A_RJszs9FwhvDhTpwSgocw.s['46']++;Y.namespace('ModelSync').Local=LocalSync;},'@VERSION@',{'supersedes':[''],'skinnable':'false','requires':['model','model-list','io-base','json-stringify'],'optional':['']});
