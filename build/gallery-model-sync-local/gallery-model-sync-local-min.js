YUI.add("gallery-model-sync-local",function(e,t){function n(){}n._NON_ATTRS_CFG=["root"],n._data={},n.prototype={root:"",storage:null,initializer:function(t){var r;t||(t={}),"root"in t&&(this.root=t.root||"");try{this.storage=e.config.win.localStorage,r=this.storage.getItem(this.root)}catch(i){}n._data[this.root]=r&&e.JSON.parse(r)||{}},generateID:function(t){return e.guid(t+"_")},sync:function(e,t,n){t||(t={});var r;switch(e){case"read":this._isYUIModelList?r=this._index(t):r=this._show(t);break;case"create":r=this._create(t);break;case"update":r=this._update(t);break;case"delete":r=this._destroy(t)}r?n(null,r):n("Data not found")},_index:function(t){return e.Object.values(n._data[this.root])},_show:function(e){return n._data[this.root][this.get("id")]},_create:function(e){var t=this.toJSON();return t.id=this.generateID(this.root),n._data[this.root][t.id]=t,this._save(),t},_update:function(t){var r=e.merge(this.toJSON(),t);return n._data[this.root][this.get("id")]=r,this._save(),r},_destroy:function(e){return delete n._data[this.root][this.get("id")],this._save(),this.toJSON()},_save:function(){this.storage&&this.storage.setItem(this.root,e.JSON.stringify(n._data[this.root]))}},e.namespace("ModelSync").Local=n},"@VERSION@",{supersedes:[""],skinnable:"false",requires:["model","model-list","io-base","json-stringify"],optional:[""]});
