if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-model-sync-rest/gallery-model-sync-rest.js']) {
   __coverage__['build/gallery-model-sync-rest/gallery-model-sync-rest.js'] = {"path":"build/gallery-model-sync-rest/gallery-model-sync-rest.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0],"14":[0,0],"15":[0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":35},"end":{"line":1,"column":54}}},"2":{"name":"RESTSync","line":43,"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":20}}},"3":{"name":"(anonymous_3)","line":238,"loc":{"start":{"line":238,"column":9},"end":{"line":238,"column":21}}},"4":{"name":"(anonymous_4)","line":258,"loc":{"start":{"line":258,"column":17},"end":{"line":258,"column":35}}},"5":{"name":"(anonymous_5)","line":297,"loc":{"start":{"line":297,"column":10},"end":{"line":297,"column":47}}},"6":{"name":"(anonymous_6)","line":341,"loc":{"start":{"line":341,"column":25},"end":{"line":341,"column":46}}},"7":{"name":"(anonymous_7)","line":347,"loc":{"start":{"line":347,"column":25},"end":{"line":347,"column":46}}},"8":{"name":"(anonymous_8)","line":371,"loc":{"start":{"line":371,"column":13},"end":{"line":371,"column":31}}},"9":{"name":"(anonymous_9)","line":382,"loc":{"start":{"line":382,"column":41},"end":{"line":382,"column":57}}},"10":{"name":"(anonymous_10)","line":417,"loc":{"start":{"line":417,"column":14},"end":{"line":417,"column":29}}},"11":{"name":"(anonymous_11)","line":446,"loc":{"start":{"line":446,"column":16},"end":{"line":446,"column":28}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":470,"column":3}},"2":{"start":{"line":33,"column":0},"end":{"line":39,"column":33}},"3":{"start":{"line":43,"column":0},"end":{"line":43,"column":22}},"4":{"start":{"line":59,"column":0},"end":{"line":64,"column":2}},"5":{"start":{"line":81,"column":0},"end":{"line":84,"column":2}},"6":{"start":{"line":97,"column":0},"end":{"line":97,"column":30}},"7":{"start":{"line":112,"column":0},"end":{"line":112,"column":30}},"8":{"start":{"line":139,"column":0},"end":{"line":139,"column":41}},"9":{"start":{"line":151,"column":0},"end":{"line":151,"column":42}},"10":{"start":{"line":153,"column":0},"end":{"line":449,"column":2}},"11":{"start":{"line":239,"column":8},"end":{"line":240,"column":16}},"12":{"start":{"line":242,"column":8},"end":{"line":244,"column":9}},"13":{"start":{"line":243,"column":12},"end":{"line":243,"column":24}},"14":{"start":{"line":246,"column":8},"end":{"line":246,"column":34}},"15":{"start":{"line":248,"column":8},"end":{"line":251,"column":9}},"16":{"start":{"line":250,"column":12},"end":{"line":250,"column":23}},"17":{"start":{"line":253,"column":8},"end":{"line":253,"column":34}},"18":{"start":{"line":259,"column":8},"end":{"line":259,"column":32}},"19":{"start":{"line":260,"column":8},"end":{"line":260,"column":55}},"20":{"start":{"line":298,"column":8},"end":{"line":298,"column":34}},"21":{"start":{"line":300,"column":8},"end":{"line":305,"column":19}},"22":{"start":{"line":308,"column":8},"end":{"line":313,"column":9}},"23":{"start":{"line":309,"column":12},"end":{"line":309,"column":39}},"24":{"start":{"line":312,"column":12},"end":{"line":312,"column":43}},"25":{"start":{"line":316,"column":8},"end":{"line":324,"column":9}},"26":{"start":{"line":320,"column":12},"end":{"line":320,"column":55}},"27":{"start":{"line":323,"column":12},"end":{"line":323,"column":28}},"28":{"start":{"line":327,"column":8},"end":{"line":331,"column":9}},"29":{"start":{"line":330,"column":12},"end":{"line":330,"column":48}},"30":{"start":{"line":334,"column":8},"end":{"line":356,"column":11}},"31":{"start":{"line":342,"column":20},"end":{"line":344,"column":21}},"32":{"start":{"line":343,"column":24},"end":{"line":343,"column":57}},"33":{"start":{"line":348,"column":20},"end":{"line":353,"column":21}},"34":{"start":{"line":349,"column":24},"end":{"line":352,"column":45}},"35":{"start":{"line":372,"column":8},"end":{"line":373,"column":17}},"36":{"start":{"line":375,"column":8},"end":{"line":377,"column":9}},"37":{"start":{"line":376,"column":12},"end":{"line":376,"column":36}},"38":{"start":{"line":379,"column":8},"end":{"line":391,"column":9}},"39":{"start":{"line":380,"column":12},"end":{"line":380,"column":22}},"40":{"start":{"line":382,"column":12},"end":{"line":387,"column":15}},"41":{"start":{"line":383,"column":16},"end":{"line":386,"column":17}},"42":{"start":{"line":385,"column":20},"end":{"line":385,"column":52}},"43":{"start":{"line":390,"column":12},"end":{"line":390,"column":33}},"44":{"start":{"line":393,"column":8},"end":{"line":393,"column":32}},"45":{"start":{"line":418,"column":8},"end":{"line":418,"column":29}},"46":{"start":{"line":420,"column":8},"end":{"line":422,"column":9}},"47":{"start":{"line":421,"column":12},"end":{"line":421,"column":35}},"48":{"start":{"line":424,"column":8},"end":{"line":426,"column":33}},"49":{"start":{"line":447,"column":8},"end":{"line":447,"column":38}},"50":{"start":{"line":453,"column":0},"end":{"line":453,"column":41}}},"branchMap":{"1":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":8},"end":{"line":242,"column":8}},{"start":{"line":242,"column":8},"end":{"line":242,"column":8}}]},"2":{"line":242,"type":"binary-expr","locations":[{"start":{"line":242,"column":12},"end":{"line":242,"column":32}},{"start":{"line":242,"column":36},"end":{"line":242,"column":48}}]},"3":{"line":248,"type":"if","locations":[{"start":{"line":248,"column":8},"end":{"line":248,"column":8}},{"start":{"line":248,"column":8},"end":{"line":248,"column":8}}]},"4":{"line":248,"type":"binary-expr","locations":[{"start":{"line":248,"column":12},"end":{"line":248,"column":16}},{"start":{"line":248,"column":20},"end":{"line":248,"column":56}}]},"5":{"line":259,"type":"binary-expr","locations":[{"start":{"line":259,"column":8},"end":{"line":259,"column":14}},{"start":{"line":259,"column":19},"end":{"line":259,"column":30}}]},"6":{"line":260,"type":"binary-expr","locations":[{"start":{"line":260,"column":8},"end":{"line":260,"column":27}},{"start":{"line":260,"column":32},"end":{"line":260,"column":53}}]},"7":{"line":298,"type":"binary-expr","locations":[{"start":{"line":298,"column":8},"end":{"line":298,"column":15}},{"start":{"line":298,"column":20},"end":{"line":298,"column":32}}]},"8":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":24},"end":{"line":303,"column":39}},{"start":{"line":303,"column":43},"end":{"line":303,"column":64}}]},"9":{"line":304,"type":"binary-expr","locations":[{"start":{"line":304,"column":24},"end":{"line":304,"column":41}},{"start":{"line":304,"column":45},"end":{"line":304,"column":64}}]},"10":{"line":308,"type":"if","locations":[{"start":{"line":308,"column":8},"end":{"line":308,"column":8}},{"start":{"line":308,"column":8},"end":{"line":308,"column":8}}]},"11":{"line":308,"type":"binary-expr","locations":[{"start":{"line":308,"column":12},"end":{"line":308,"column":29}},{"start":{"line":308,"column":33},"end":{"line":308,"column":49}}]},"12":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":8},"end":{"line":316,"column":8}},{"start":{"line":316,"column":8},"end":{"line":316,"column":8}}]},"13":{"line":316,"type":"binary-expr","locations":[{"start":{"line":316,"column":12},"end":{"line":316,"column":33}},{"start":{"line":317,"column":17},"end":{"line":317,"column":33}},{"start":{"line":317,"column":37},"end":{"line":317,"column":56}}]},"14":{"line":327,"type":"if","locations":[{"start":{"line":327,"column":8},"end":{"line":327,"column":8}},{"start":{"line":327,"column":8},"end":{"line":327,"column":8}}]},"15":{"line":327,"type":"binary-expr","locations":[{"start":{"line":327,"column":12},"end":{"line":327,"column":21}},{"start":{"line":328,"column":17},"end":{"line":328,"column":34}},{"start":{"line":328,"column":38},"end":{"line":328,"column":54}},{"start":{"line":328,"column":58},"end":{"line":328,"column":77}}]},"16":{"line":342,"type":"if","locations":[{"start":{"line":342,"column":20},"end":{"line":342,"column":20}},{"start":{"line":342,"column":20},"end":{"line":342,"column":20}}]},"17":{"line":348,"type":"if","locations":[{"start":{"line":348,"column":20},"end":{"line":348,"column":20}},{"start":{"line":348,"column":20},"end":{"line":348,"column":20}}]},"18":{"line":375,"type":"if","locations":[{"start":{"line":375,"column":8},"end":{"line":375,"column":8}},{"start":{"line":375,"column":8},"end":{"line":375,"column":8}}]},"19":{"line":379,"type":"if","locations":[{"start":{"line":379,"column":8},"end":{"line":379,"column":8}},{"start":{"line":379,"column":8},"end":{"line":379,"column":8}}]},"20":{"line":383,"type":"if","locations":[{"start":{"line":383,"column":16},"end":{"line":383,"column":16}},{"start":{"line":383,"column":16},"end":{"line":383,"column":16}}]},"21":{"line":383,"type":"binary-expr","locations":[{"start":{"line":383,"column":20},"end":{"line":383,"column":31}},{"start":{"line":383,"column":35},"end":{"line":383,"column":46}}]},"22":{"line":393,"type":"binary-expr","locations":[{"start":{"line":393,"column":15},"end":{"line":393,"column":18}},{"start":{"line":393,"column":22},"end":{"line":393,"column":31}}]},"23":{"line":420,"type":"if","locations":[{"start":{"line":420,"column":8},"end":{"line":420,"column":8}},{"start":{"line":420,"column":8},"end":{"line":420,"column":8}}]},"24":{"line":424,"type":"cond-expr","locations":[{"start":{"line":425,"column":16},"end":{"line":425,"column":26}},{"start":{"line":426,"column":16},"end":{"line":426,"column":32}}]},"25":{"line":424,"type":"binary-expr","locations":[{"start":{"line":424,"column":15},"end":{"line":424,"column":19}},{"start":{"line":424,"column":23},"end":{"line":424,"column":59}}]}},"code":["(function () { YUI.add('gallery-model-sync-rest', function (Y, NAME) {","","/**","An Extension which provides a RESTful HTTP sync implementation that can be mixed","into a Model or ModelList subclass.","","@module gallery-model-sync-rest","**/","","/**","An Extension which provides a RESTful HTTP sync implementation that can be mixed","into a Model or ModelList subclass.","","This makes it trivial for your Model or ModelList subclasses communicate and","transmit JSON data via RESTful HTTP. In most cases you'll only need to provide a","value for `root` when sub-classing Model, and only provide a value for `url`","when sub-classing ModelList.","","    var User = Y.Base.create('user', Y.Model, [Y.ModelSync.REST], {","        root: '/user'","    });","","    var Users = Y.Base.create('users', Y.ModelList, [Y.ModelSync.REST], {","        model: User,","        url  : '/user'","    });","","@class ModelSync.REST","@extensionfor Model","@extensionfor ModelList","**/","","var Lang = Y.Lang,","","    sub        = Lang.sub,","    isValue    = Lang.isValue,","    isString   = Lang.isString,","    isNumber   = Lang.isNumber,","    isFunction = Lang.isFunction;","","// -- RESTSync -----------------------------------------------------------------","","function RESTSync() {}","","/**","Static hash lookup table of RESTful HTTP methods corresponding to CRUD actions.","","@property HTTP_METHODS","@type Object","@default","    {","        'create': 'POST',","        'read'  : 'GET',","        'update': 'PUT',","        'delete': 'DELETE'","    }","@static","**/","RESTSync.HTTP_METHODS = {","    'create': 'POST',","    'read'  : 'GET',","    'update': 'PUT',","    'delete': 'DELETE'","};","","/**","Default headers used with all XHRs.","","These headers will be merged with any request-specific headers, and the request-","specific headers will take precedence.","","@property HTTP_HEADERS","@type Object","@default","    {","        'Accept'      : 'application/json',","        'Content-Type': 'application/json'","    }","@static","**/","RESTSync.HTTP_HEADERS = {","    'Accept'      : 'application/json',","    'Content-Type': 'application/json'","};","","/**","The number of milliseconds before the XHR will timeout/abort. This defaults to","30 seconds.","","**Note:** This can be overridden on a per-request basis. See `sync()` method.","","@property HTTP_TIMEOUT","@type Number","@default 30000","@static","**/","RESTSync.HTTP_TIMEOUT = 30000;","","/**","Static flag to use the HTTP POST method instead of PUT or DELETE.","","If the server-side HTTP framework isn't RESTful, setting this flag to `true`","will cause all PUT and DELETE requests to instead use the POST HTTP method, and","add a `X-HTTP-Method-Override` HTTP header with the value of the method type","which was overridden.","","@property EMULATE_HTTP","@type Boolean","@default false","@static","**/","RESTSync.EMULATE_HTTP = false;","","/**","A request authenticity token to validate HTTP requests made by this extension","with the server when the request results in changing persistent state. This","allows you to protect your server from CSRF attacks.","","A CSRF token provided by the server can be embedded in the HTML document and","assigned to `YUI.Env.CSRF_TOKEN` like this:","","    <script>","        YUI.Env.CSRF_TOKEN = {{session.authenticityToken}};","    </script>","","The above should come after YUI see file so that `YUI.Env` has been defined.","","**Note:** This can be overridden on a per-request basis. See `sync()` method.","","When a value for the CSRF token is provided, either statically or via `options`","passed to the `save()` and `destroy()` methods, the applicable HTTP requests","will have a `X-CSRF-Token` header added with the token value.","","@property CSRF_TOKEN","@type String","@default YUI.Env.CSRF_TOKEN","@static","**/","RESTSync.CSRF_TOKEN = YUI.Env.CSRF_TOKEN;","","/**","Properties that shouldn't be turned into ad-hoc attributes when passed to a","Model or ModelList constructor.","","@property _NON_ATTRS_CFG","@type Array","@default ['root', 'url']","@static","@protected","**/","RESTSync._NON_ATTRS_CFG = ['root', 'url'];","","RESTSync.prototype = {","","    // -- Public Properties ----------------------------------------------------","","    /**","    A String which represents the root or collection part of the URL space which","    relates to a Model or ModelList. Usually this value should be same for all","    instances of a specific Model/ModelList type.","","    When sub-classing Y.Model, most of the time you'll want to just override","    this property, and let the URLs for the XHRs be generated by convention. If","    the `root` String ends with a trailing-slash, XHR URLs will also end with a","    '/'; if the `root` does not end with a slash, neither will the XHR URLs.","","    @example","        var User = Y.Base.create('user', Y.Model, [Y.ModelSync.REST], {","            root: '/user/'","        });","","        var myUser = new User({id: '123'});","        myUser.load(); // Will GET the User data from: /user/123/","","        var newUser = new User({name: 'Eric Ferraiuolo'});","        newUser.save(); // Will POST the User data to: /user/","","    When sub-classing Y.ModelList, usually you'll want to ignore configuring the","    `root` and instead just set the `url` to a String; but if you just specify a","    value for `root`, things will work correctly.","","    @property root","    @type String","    @default \"\"","    **/","    root: '',","","    /**","    A Function or String which is used to generate or specify the URL for the","    XHRs. While, this property can be defined for each Model/ModelList instance,","    usually you'll want to use a Function or String-pattern instead.","","    If the `url` property is a Function, it should return the String that should","    be used as the URL. The Function will be called before each request and will","    be passed the sync `action` which is currently being performed.","","    If the `url` property is a String, it will be processed by `Y.Lang.sub()`;","    this is useful when the URLs for a Model type match a specific pattern and","    can use simple replacement tokens:","","    @example","        '/user/{id}'","","    **Note:** String substitution on the `url` property will only happen for","    Y.Model subclasses, and only String and Number ATTR values will be","    substituted; do not expect something fancy to happen with Object, Array, or","    Boolean values; they will simply be ignored.","","    When sub-classing Y.Model, you will probably be able to rely on the default","    implementation of `url()` which works in conjunction with the `root`","    property and whether the Model instance is new or not (i.e. has an `id`). If","    the `root` property ends with a trailing-slash, the generated URL for the","    specific Model instance will also end with a trailing-slash.","","    If your URL-space has plural root or collection URLs, while the specific","    item resources are under a singular name, e.g. /users (plural) and /user/123","    (singular); you'll probably want to configure the `root` and `url`","    properties like this:","","    @example","        var User = Y.Base.create('user', Y.Model, [Y.ModelSync.REST], {","            root: '/users',","            url : '/user/{id}'","        });","","        var myUser = new User({id: '123'});","        myUser.load(); // Will GET the User data from: /user/123","","        var newUser = new User({name: 'Eric Ferraiuolo'});","        newUser.save(); // Will POST the User data to: /users","","    When sub-classing Y.ModelList, you probably just need to specify a simple","    String for the `url` property and leave `root` to be the default value.","","    @property url","    @type Function|String","    **/","    url: function () {","        var root = this.root,","            url;","","        if (this._isYUIModelList || this.isNew()) {","            return root;","        }","","        url = this.getAsURL('id');","","        if (root && root.charAt(root.length - 1) === '/') {","            // Add trailing-slash because root has a trailing-slash.","            url += '/';","        }","","        return this._joinURL(url);","    },","","    // -- Lifecycle Methods ----------------------------------------------------","","    initializer: function (config) {","        config || (config = {});","        isValue(config.url) && (this.url = config.url);","    },","","    // -- Public Methods -------------------------------------------------------","","    /**","    Communicates with a RESTful HTTP server by sending and receiving JSON data","    via XHRs.","","    This method is called internally by load(), save(), and destroy().","","    @method sync","    @param {String} action Sync action to perform. May be one of the following:","","      * **create**: Store a newly-created model for the first time.","      * **read**  : Load an existing model.","      * **update**: Update an existing model.","      * **delete**: Delete an existing model.","","    @param {Object} [options] Sync options:","      @param {String} [options.csrfToken] The authenticity token used by the","        server to verify the validity of this request and protected against CSRF","        attacks. This overrides the default provided by the `CSRF_TOKEN` static","        property.","      @param {Object} [options.headers] The HTTP headers to mix with the default","        headers specified by the `headers` property.","      @param {Number} [options.timeout] The number of milliseconds before the","        request will timeout and be aborted. This overrides the default provided","        by the `HTTP_TIMEOUT` static property.","    @param {callback} [callback] Called when the sync operation finishes.","      @param {Error|null} callback.err If an error occurred, this parameter will","        contain the error. If the sync operation succeeded, _err_ will be","        falsy.","      @param {Any} [callback.response] The server's response. This value will","        be passed to the parse() method, which is expected to parse it and","        return an attribute hash.","    **/","    sync: function (action, options, callback) {","        options || (options = {});","","        var url       = this._getURL(action),","            method    = RESTSync.HTTP_METHODS[action],","            headers   = Y.merge(RESTSync.HTTP_HEADERS, options.headers),","            timeout   = options.timeout || RESTSync.HTTP_TIMEOUT,","            csrfToken = options.csrfToken || RESTSync.CSRF_TOKEN,","            entity;","","        // Prepare the content if we are sending data to the server.","        if (method === 'POST' || method === 'PUT') {","            entity = this._serialize();","        } else {","            // Remove header, no content is being sent.","            delete headers['Content-Type'];","        }","","        // Setup HTTP emulation for older servers if we need it.","        if (RESTSync.EMULATE_HTTP &&","                (method === 'PUT' || method === 'DELETE')) {","","            // Pass along original method type in the headers.","            headers['X-HTTP-Method-Override'] = method;","","            // Fall-back to using POST method type.","            method = 'POST';","        }","","        // Add CSRF token to HTTP request headers if one is specified.","        if (csrfToken &&","                (method === 'POST' || method === 'PUT' || method === 'DELETE')) {","","            headers['X-CSRF-Token'] = csrfToken;","        }","","        // Setup and send the XHR.","        Y.io(url, {","            method : method,","            headers: headers,","            data   : entity,","            timeout: timeout,","","            on: {","                success: function (txId, res) {","                    if (isFunction(callback)) {","                        callback(null, res.responseText);","                    }","                },","","                failure: function (txId, res) {","                    if (isFunction(callback)) {","                        callback({","                            code: res.status,","                            msg : res.statusText","                        }, res.responseText);","                    }","                }","            }","        });","    },","","    // -- Protected Methods ----------------------------------------------------","","    /**","    Helper method to return the URL to use when making the XHR to the server.","","    This method correctly handles variations of the `url` property/method.","","    @method _getURL","    @param {String} action Sync action to perform.","    @return {String} the URL for the XHR.","    @protected","    **/","    _getURL: function (action) {","        var url = this.url,","            data;","","        if (isFunction(url)) {","            return this.url(action);","        }","","        if (this._isYUIModel) {","            data = {};","","            Y.Object.each(this.toJSON(), function (v, k) {","                if (isString(v) || isNumber(v)) {","                    // URL-encode any String or Number values.","                    data[k] = encodeURIComponent(v);","                }","            });","","            // Substitute placeholders with the URL-encoded data values.","            url = sub(url, data);","        }","","        return url || this.root;","    },","","    /**","    Joins the `root` URL to the specified _url_, normalizing leading/trailing","    `/` characters.","","    Copied from YUI 3's `Y.Router` Class: by Ryan Grove (Yahoo! Inc.)","    http://yuilibrary.com/yui/docs/api/classes/Router.html#method__joinURL","","    @example","        model.root = '/foo'","        model._joinURL('bar');  // => '/foo/bar'","        model._joinURL('/bar'); // => '/foo/bar'","","        model.root = '/foo/'","        model._joinURL('bar');  // => '/foo/bar'","        model._joinURL('/bar'); // => '/foo/bar'","","    @method _joinURL","    @param {String} url URL to append to the `root` URL.","    @return {String} Joined URL.","    @protected","    **/","    _joinURL: function (url) {","        var root = this.root;","","        if (url.charAt(0) === '/') {","            url = url.substring(1);","        }","","        return root && root.charAt(root.length - 1) === '/' ?","                root + url :","                root + '/' + url;","    },","","    /**","    Serializes `this` model to be used as the HTTP request entity body. By","    default this model will be serialized to a JSON string via its `toJSON()`","    method.","","    You can override this method when the HTTP server expects a different","    representation of this model's data that is different from the default JSON","    serialization.","","    **Note:** A model's `toJSON()` method can also be overridden; if you just","    need to modify which attributes are serialized to JSON, that's a better","    place to start.","","    @method _serialize","    @return {String} serialized HTTP request entity body.","    @protected","    **/","    _serialize: function () {","        return Y.JSON.stringify(this);","    }","};","","// -- Namespace ----------------------------------------------------------------","","Y.namespace('ModelSync').REST = RESTSync;","","","}, '@VERSION@', {","    \"supersedes\": [","        \"\"","    ],","    \"skinnable\": \"false\",","    \"requires\": [","        \"model\",","        \"model-list\",","        \"io-base\",","        \"json-stringify\"","    ],","    \"optional\": [","        \"\"","    ]","});","","}());"]};
}
var __cov_t5Z8y_cn_pvqq7fyvYEqyQ = __coverage__['build/gallery-model-sync-rest/gallery-model-sync-rest.js'];
__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['1']++;YUI.add('gallery-model-sync-rest',function(Y,NAME){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['1']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['2']++;var Lang=Y.Lang,sub=Lang.sub,isValue=Lang.isValue,isString=Lang.isString,isNumber=Lang.isNumber,isFunction=Lang.isFunction;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['3']++;function RESTSync(){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['2']++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['4']++;RESTSync.HTTP_METHODS={'create':'POST','read':'GET','update':'PUT','delete':'DELETE'};__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['5']++;RESTSync.HTTP_HEADERS={'Accept':'application/json','Content-Type':'application/json'};__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['6']++;RESTSync.HTTP_TIMEOUT=30000;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['7']++;RESTSync.EMULATE_HTTP=false;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['8']++;RESTSync.CSRF_TOKEN=YUI.Env.CSRF_TOKEN;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['9']++;RESTSync._NON_ATTRS_CFG=['root','url'];__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['10']++;RESTSync.prototype={root:'',url:function(){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['3']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['11']++;var root=this.root,url;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['12']++;if((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['2'][0]++,this._isYUIModelList)||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['2'][1]++,this.isNew())){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['1'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['13']++;return root;}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['1'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['14']++;url=this.getAsURL('id');__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['15']++;if((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['4'][0]++,root)&&(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['4'][1]++,root.charAt(root.length-1)==='/')){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['3'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['16']++;url+='/';}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['3'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['17']++;return this._joinURL(url);},initializer:function(config){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['4']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['18']++;(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['5'][0]++,config)||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['5'][1]++,config={});__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['19']++;(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['6'][0]++,isValue(config.url))&&(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['6'][1]++,this.url=config.url);},sync:function(action,options,callback){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['5']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['20']++;(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['7'][0]++,options)||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['7'][1]++,options={});__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['21']++;var url=this._getURL(action),method=RESTSync.HTTP_METHODS[action],headers=Y.merge(RESTSync.HTTP_HEADERS,options.headers),timeout=(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['8'][0]++,options.timeout)||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['8'][1]++,RESTSync.HTTP_TIMEOUT),csrfToken=(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['9'][0]++,options.csrfToken)||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['9'][1]++,RESTSync.CSRF_TOKEN),entity;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['22']++;if((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['11'][0]++,method==='POST')||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['11'][1]++,method==='PUT')){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['10'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['23']++;entity=this._serialize();}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['10'][1]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['24']++;delete headers['Content-Type'];}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['25']++;if((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['13'][0]++,RESTSync.EMULATE_HTTP)&&((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['13'][1]++,method==='PUT')||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['13'][2]++,method==='DELETE'))){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['12'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['26']++;headers['X-HTTP-Method-Override']=method;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['27']++;method='POST';}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['12'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['28']++;if((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['15'][0]++,csrfToken)&&((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['15'][1]++,method==='POST')||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['15'][2]++,method==='PUT')||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['15'][3]++,method==='DELETE'))){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['14'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['29']++;headers['X-CSRF-Token']=csrfToken;}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['14'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['30']++;Y.io(url,{method:method,headers:headers,data:entity,timeout:timeout,on:{success:function(txId,res){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['6']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['31']++;if(isFunction(callback)){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['16'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['32']++;callback(null,res.responseText);}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['16'][1]++;}},failure:function(txId,res){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['7']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['33']++;if(isFunction(callback)){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['17'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['34']++;callback({code:res.status,msg:res.statusText},res.responseText);}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['17'][1]++;}}}});},_getURL:function(action){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['8']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['35']++;var url=this.url,data;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['36']++;if(isFunction(url)){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['18'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['37']++;return this.url(action);}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['18'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['38']++;if(this._isYUIModel){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['19'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['39']++;data={};__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['40']++;Y.Object.each(this.toJSON(),function(v,k){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['9']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['41']++;if((__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['21'][0]++,isString(v))||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['21'][1]++,isNumber(v))){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['20'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['42']++;data[k]=encodeURIComponent(v);}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['20'][1]++;}});__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['43']++;url=sub(url,data);}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['19'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['44']++;return(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['22'][0]++,url)||(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['22'][1]++,this.root);},_joinURL:function(url){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['10']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['45']++;var root=this.root;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['46']++;if(url.charAt(0)==='/'){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['23'][0]++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['47']++;url=url.substring(1);}else{__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['23'][1]++;}__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['48']++;return(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['25'][0]++,root)&&(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['25'][1]++,root.charAt(root.length-1)==='/')?(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['24'][0]++,root+url):(__cov_t5Z8y_cn_pvqq7fyvYEqyQ.b['24'][1]++,root+'/'+url);},_serialize:function(){__cov_t5Z8y_cn_pvqq7fyvYEqyQ.f['11']++;__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['49']++;return Y.JSON.stringify(this);}};__cov_t5Z8y_cn_pvqq7fyvYEqyQ.s['50']++;Y.namespace('ModelSync').REST=RESTSync;},'@VERSION@',{'supersedes':[''],'skinnable':'false','requires':['model','model-list','io-base','json-stringify'],'optional':['']});
